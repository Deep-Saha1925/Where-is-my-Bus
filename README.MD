# ğŸšŒ Where Is My Bus (WIMB)

## ğŸ“Œ Project Description

**Where Is My Bus (WIMB)** is a real-time, route-based bus tracking system designed to solve the problem of **uncertain bus timings and locations**, especially in semi-urban and rural regions like North Bengal.

Unlike traditional systems that rely only on databases, WIMB uses a **hybrid approach**:
- **Dynamic data** (live bus location, rides)
- **Static route data** (stops, distance, halt times) loaded from **Excel files**
- **Frontend dropdown data** synchronized via **JSON**

This design makes the system **realistic, scalable, and easy to maintain** for government or private transport systems.

---

## â“ Problem Statement

- Passengers wait without knowing the exact bus position
- No clarity on whether a bus has already crossed a stop
- Static routes are hardcoded or poorly managed
- No forward / reverse route intelligence

---

## âœ… Solution Overview

WIMB provides:

- ğŸ”´ **Live bus tracking**
- ğŸ—ºï¸ **Excel-driven route visualization**
- ğŸ” **Automatic forward & reverse direction handling**
- ğŸ” **Source â†’ Destination based bus search**
- ğŸ“ ** Auto Completion dropdown-based stop selection (real-world UX)**
- âŒ **No false bus visibility after crossing source**

---

## ğŸ› ï¸ Technology Stack

### ğŸ”¹ Backend
- Java 17
- Spring Boot
- REST APIs
- Apache POI (Excel processing)
- MySQL
- Jackson (JSON sync)

### ğŸ”¹ Frontend
- HTML
- Tailwind CSS
- JavaScript
- Leaflet.js
- OpenStreetMap
- Font Awesome

---

## ğŸ“¸ Application Screenshots

### ğŸ  Dashboard
<img src="images/dashboard.png" width="600"/>

### ğŸ—º Live Bus Tracking
<img src="images/live-tracking.png" width="600"/>

### ğŸ›£ Route Management
<img src="images/dashboard.png" width="600"/>

### ğŸ” Admin Panel
<img src="images/admin-panel.png" width="600"/>

## ğŸ§± Architecture


```
Driver App (GPS)
      â†“
Location API (Spring Boot)
      â†“
Database (Live Data)
      â†“
User UI (Leaflet Map)

Excel Route File
      â†“
Route Loader Service
      â†“
In-Memory Route Cache
      â†“
Route API
      â†“
Map + ETA Table
```

---

## ğŸ“‚ Route Data Management

### ğŸ“˜ Excel (Single Source of Truth)

Location:
routes/ABC.xlsx

```

### ğŸ“‘ Excel Format (Mandatory)

| routeKey | stopName | latitude | longitude | distanceFromStartKm | slackTimeMin |
|----------|----------|----------|-----------|---------------------|--------------|
| SLG_NJP  | Siliguri | 26.7271  | 88.3953   | 0                   | 0            |
| SLG_NJP  | Bagdogra | 26.6986  | 88.3110   | 12                  | 5            |
| SLG_NJP  | NJP      | 26.6812  | 88.3290   | 18                  | 0            |

```
âœ” Loaded once at application startup  
âœ” No DB required for route data  
âœ” Easy to update by non-technical staff

Defines:
- stopOrder
- stopName
- latitude / longitude
- distanceFromStartKm
- slackTimeMin

Loaded once at application startup.

---

### ğŸ“— JSON (Frontend Dropdown)

Location:
data/stops.json

- Automatically updated from **Excel stopName column**
- Used only for UI dropdowns
- Prevents typing errors
- Enables direction detection

---

## ğŸ”„ Direction Logic (Core Innovation)

Direction is determined automatically:

- **FORWARD** â†’ sourceOrder < destinationOrder
- **BACKWARD** â†’ sourceOrder > destinationOrder

### Passenger Visibility Rule

A bus is shown **only if it has NOT crossed the passenger's source stop**.

âœ” Forward-safe  
âœ” Reverse-safe  
âœ” Real-world accurate

---

## ğŸ”— Backend API Endpoints

### â–¶ Start Ride
```
POST /api/ride/start
```

```json
{
  "busId": 1,
  "source": "SLG",
  "destination": "NJP",
  "latitude": 26.7271,
  "longitude": 88.3953
}
```

---

### â–¶ Update Location (Driver GPS)
```
POST /api/location/update
```

```json
{
  "rideId": 5,
  "latitude": 26.7210,
  "longitude": 88.3821,
  "speed": 32.5
}
```

---

### â–¶ Get Active Buses on Route
```
GET /api/ride/active?source=SLG&destination=NJP
```

---

### â–¶ Get Route Stops (Excel-backed)
```
GET /api/routes/{routeKey}
```

Example:
```
/api/routes/SLG_NJP
```

---


### â–¶ Admin Dashboard (Track all bus location live)
```
GET /admin/active/all-buses
```


## ğŸ–¥ï¸ Frontend Flow

### index.html
- Enter **Source & Destination**
- View **all active buses**
- Click **Track Bus**

### track.html
- Full route drawn from Excel
- Stops marked on map
- Live bus icon moves automatically
- Popup always shows current location
- ETA table rendered from route data

### admin-buses.html
- Enter **See all live buses**
- View **bus live location on map**
- Click **Track Bus**

---

## âœ¨ Key Highlights

- ETA prediction
- Excel = master data
- JSON auto-synced
- Direction-aware filtering
- No false bus visibility
- Designed for real transport systems

---

## ğŸš€ Future Enhancements

- WebSocket live tracking
- Admin Excel upload panel
- Alerts & notifications
- Multi-route support

---

## ğŸ‘¨â€ğŸ’» Author

**Deep Saha**  
Backend & System Design Enthusiast  
Java | Spring Boot | Maps | Real-Time Systems